- content_for :title, @query.present? ? "ã€Œ#{@query}ã€ã®æ¤œç´¢çµæœ" : "ã‚µã‚¤ãƒˆå†…æ¤œç´¢"

%section.hero-section{ style: @site_setting.hero_background_image.present? ? "background-image: url(#{url_for(@site_setting.hero_background_image)}); background-size: cover; background-position: center 40%; background-repeat: no-repeat;" : '' }
  .hero-overlay
  .container
    .hero-content
      %h1.hero-title 
        = @query.present? ? "ã€Œ#{@query}ã€ã®æ¤œç´¢çµæœ" : "ã‚µã‚¤ãƒˆå†…æ¤œç´¢"
      %p.hero-description
        = @query.present? ? "#{@total_count}ä»¶ã®çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ" : "è¨˜äº‹ã€ãƒšãƒ¼ã‚¸ã€æ±‚äººã€åˆ¶ä½œå®Ÿç¸¾ã‹ã‚‰æ¤œç´¢ã§ãã¾ã™"

/ ãƒ‘ãƒ³ã‚¯ã‚ºãƒªã‚¹ãƒˆ
.breadcrumb-section
  .container
    %nav.breadcrumb
      %ol
        %li
          = link_to "ãƒ›ãƒ¼ãƒ ", root_path
        %li
          %span ã‚µã‚¤ãƒˆå†…æ¤œç´¢
        - if @query.present?
          %li
            %span= "ã€Œ#{@query}ã€ã®æ¤œç´¢çµæœ"

.search-results-page
  .container
    / æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ 
    .search-form-section
      = form_with url: search_path, method: :get, local: true, class: 'search-form' do |form|
        .search-input-group
          = form.text_field :q, value: @query, placeholder: "ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„", class: 'search-input'
          = form.submit "æ¤œç´¢", class: 'search-button'

    - if @query.present?
      / æ¤œç´¢çµæœã‚µãƒãƒªãƒ¼
      .search-summary
        %h2.summary-title æ¤œç´¢çµæœï¼š#{@total_count}ä»¶
        .result-counts
          - if @counts[:articles] > 0
            %span.count-item 
              %i.icon-article ğŸ“°
              ã‚³ãƒ©ãƒ : #{@counts[:articles]}ä»¶
          - if @counts[:pages] > 0
            %span.count-item
              %i.icon-page ğŸ“„
              å›ºå®šãƒšãƒ¼ã‚¸: #{@counts[:pages]}ä»¶
          - if @counts[:jobs] > 0
            %span.count-item
              %i.icon-job ğŸ’¼
              æ±‚äºº: #{@counts[:jobs]}ä»¶
          - if @counts[:portfolios] > 0
            %span.count-item
              %i.icon-portfolio ğŸ¨
              åˆ¶ä½œå®Ÿç¸¾: #{@counts[:portfolios]}ä»¶

      / æ¤œç´¢çµæœè¡¨ç¤º
      .search-results
        / ã‚³ãƒ©ãƒ ï¼ˆè¨˜äº‹ï¼‰
        - if @results[:articles].any?
          .result-section
            %h3.section-title
              %i.section-icon ğŸ“°
              ã‚³ãƒ©ãƒ ï¼ˆ#{@counts[:articles]}ä»¶ï¼‰
            .result-grid
              - @results[:articles].each do |article|
                .result-item
                  .item-content
                    .item-meta
                      %span.breadcrumb-path ãƒ›ãƒ¼ãƒ  > ã‚³ãƒ©ãƒ  > #{article.title}
                      %time.published-date= article.published_at&.strftime("%Yå¹´%mæœˆ%dæ—¥")
                    %h4.item-title
                      = link_to article.title, site_article_path(article)
                    %p.item-excerpt= truncate(strip_tags(article.meta_description || ""), length: 120)
                    .item-tags
                      - if article.categories.any?
                        - article.categories.limit(3).each do |category|
                          %span.tag-item= category.name

        / å›ºå®šãƒšãƒ¼ã‚¸
        - if @results[:pages].any?
          .result-section
            %h3.section-title
              %i.section-icon ğŸ“„
              å›ºå®šãƒšãƒ¼ã‚¸ï¼ˆ#{@counts[:pages]}ä»¶ï¼‰
            .result-grid
              - @results[:pages].each do |page|
                .result-item
                  .item-content
                    .item-meta
                      %span.breadcrumb-path ãƒ›ãƒ¼ãƒ  > ãƒšãƒ¼ã‚¸ > #{page.title}
                      %time.updated-date= page.updated_at.strftime("%Yå¹´%mæœˆ%dæ—¥æ›´æ–°")
                    %h4.item-title
                      = link_to page.title, page_path(page)
                    %p.item-excerpt= truncate(strip_tags(page.meta_description || ""), length: 120)

        / æ±‚äºº
        - if @results[:jobs].any?
          .result-section
            %h3.section-title
              %i.section-icon ğŸ’¼
              æ±‚äººæƒ…å ±ï¼ˆ#{@counts[:jobs]}ä»¶ï¼‰
            .result-grid
              - @results[:jobs].each do |job|
                .result-item
                  .item-content
                    .item-meta
                      %span.breadcrumb-path ãƒ›ãƒ¼ãƒ  > æ±‚äººæƒ…å ± > #{job.title}
                      %span.job-type= job.job_type
                    %h4.item-title
                      = link_to job.title, site_job_path(job)
                    %p.item-excerpt= truncate(strip_tags(job.description || ""), length: 120)
                    .job-details
                      - if job.salary_range.present?
                        %span.detail-item
                          %i.icon ï¿½
                          = job.salary_range
                      - if job.capacity.present?
                        %span.detail-item
                          %i.icon ï¿½
                          = job.capacity

        / åˆ¶ä½œå®Ÿç¸¾
        - if @results[:portfolios].any?
          .result-section
            %h3.section-title
              %i.section-icon ğŸ¨
              åˆ¶ä½œå®Ÿç¸¾ï¼ˆ#{@counts[:portfolios]}ä»¶ï¼‰
            .result-grid
              - @results[:portfolios].each do |portfolio|
                .result-item
                  .item-content
                    .item-meta
                      %span.breadcrumb-path ãƒ›ãƒ¼ãƒ  > åˆ¶ä½œå®Ÿç¸¾ > #{portfolio.title}
                      %span.production-period= portfolio.production_period
                    %h4.item-title
                      = link_to portfolio.title, site_portfolio_path(portfolio)
                    %p.item-excerpt= truncate(strip_tags(portfolio.description || ""), length: 120)

        / çµæœãŒãªã„å ´åˆ
        - if @total_count == 0
          .no-results
            .no-results-content
              %div{style: 'font-size: 4rem; margin-bottom: 20px;'} ğŸ”
              %h3 æ¤œç´¢çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ
              %p ã€Œ#{@query}ã€ã«è©²å½“ã™ã‚‹å†…å®¹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚
              .suggestions
                %h4 æ¤œç´¢ã®ãƒ’ãƒ³ãƒˆï¼š
                %ul
                  %li ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®ã‚¹ãƒšãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„
                  %li ã‚ˆã‚Šä¸€èˆ¬çš„ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢ã—ã¦ã¿ã¦ãã ã•ã„
                  %li ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’æ¸›ã‚‰ã—ã¦ã¿ã¦ãã ã•ã„
                  %li é–¢é€£ã™ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢ã—ã¦ã¿ã¦ãã ã•ã„

    - else
      / åˆæœŸçŠ¶æ…‹ï¼ˆæ¤œç´¢å‰ï¼‰
      .search-guide
        %h2 ã‚µã‚¤ãƒˆå†…æ¤œç´¢
        %p è¨˜äº‹ã€ãƒšãƒ¼ã‚¸ã€æ±‚äººæƒ…å ±ã€åˆ¶ä½œå®Ÿç¸¾ã‹ã‚‰æƒ…å ±ã‚’æ¤œç´¢ã§ãã¾ã™ã€‚ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦æ¤œç´¢ã—ã¦ãã ã•ã„ã€‚
        
        .search-categories
          .category-item
            .category-icon ğŸ“°
            .category-content
              %h3 ã‚³ãƒ©ãƒ 
              %p æœ€æ–°ã®è¨˜äº‹ã‚„ãƒ‹ãƒ¥ãƒ¼ã‚¹
          
          .category-item
            .category-icon ğŸ“„
            .category-content
              %h3 å›ºå®šãƒšãƒ¼ã‚¸
              %p ä¼šç¤¾æƒ…å ±ã‚„ã‚µãƒ¼ãƒ“ã‚¹æ¡ˆå†…
          
          .category-item
            .category-icon ğŸ’¼
            .category-content
              %h3 æ±‚äººæƒ…å ±
              %p æ¡ç”¨æƒ…å ±ã‚„è·ç¨®
          
          .category-item
            .category-icon ğŸ¨
            .category-content
              %h3 åˆ¶ä½œå®Ÿç¸¾
              %p éå»ã®åˆ¶ä½œäº‹ä¾‹