- content_for :page_title, 'ダッシュボード'

.dashboard-overview
  .stats-grid
    = link_to admin_articles_path, class: 'stat-card stat-card-link' do
      .stat-icon
        %i.icon.icon-articles
      .stat-content
        %h3.stat-number= Article.count
        %p.stat-label 記事数
    
    = link_to admin_pages_path, class: 'stat-card stat-card-link' do
      .stat-icon
        %i.icon.icon-pages
      .stat-content
        %h3.stat-number= Page.count
        %p.stat-label 固定ページ数
    
    = link_to admin_media_path, class: 'stat-card stat-card-link' do
      .stat-icon
        %i.icon.icon-media
      .stat-content
        %h3.stat-number= Medium.count
        %p.stat-label メディア数
    
    = link_to admin_users_path, class: 'stat-card stat-card-link' do
      .stat-icon
        %i.icon.icon-users
      .stat-content
        %h3.stat-number= User.count
        %p.stat-label ユーザー数

.dashboard-content
  .dashboard-row
    .dashboard-section.dashboard-half
      %h3 最近の記事（10件）
      .recent-articles
        - @recent_articles&.each do |article|
          .article-item
            %h4= link_to article.title, admin_article_path(article), class: 'item-title'
            %p.article-meta
              作成日: #{article.created_at.strftime('%Y年%m月%d日')}
              ステータス: 
              %span{class: "status-#{article.status}"}= article.status == 'published' ? '公開' : '下書き'
        - if @recent_articles.blank?
          %p.no-content まだ記事がありません。
          = link_to '新しい記事を作成', new_admin_article_path, class: 'btn btn-primary'
        - else
          .section-footer
            = link_to '記事一覧を見る', admin_articles_path, class: 'btn btn-secondary btn-sm'
    
    .dashboard-section.dashboard-half
      %h3 最近の固定ページ（10件）
      .recent-pages
        - @recent_pages&.each do |page|
          .page-item
            %h4= link_to page.title, admin_page_path(page), class: 'item-title'
            %p.page-meta
              更新日: #{page.updated_at.strftime('%Y年%m月%d日')}
              ステータス: 
              %span{class: "status-#{page.status}"}= page.status == 'published' ? '公開' : '下書き'
              - if page.show_in_navigation
                %span.nav-indicator ナビ表示
        - if @recent_pages.blank?
          %p.no-content まだ固定ページがありません。
          = link_to '新しいページを作成', new_admin_page_path, class: 'btn btn-primary'
        - else
          .section-footer
            = link_to 'ページ一覧を見る', admin_pages_path, class: 'btn btn-secondary btn-sm'
  
  .dashboard-section
    %h3 サイト設定
    .site-status
      - setting = Setting.current
      %p サイト名: #{setting.site_name}
      %p 説明: #{setting.site_description || '未設定'}
      = link_to 'サイト設定を編集', edit_admin_settings_path, class: 'btn btn-secondary'
