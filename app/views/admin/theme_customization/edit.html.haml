- content_for :page_title, 'ãƒ†ãƒ¼ãƒã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º'

.theme-customization-container
  .customization-header
    %h2 #{@setting.theme_display_name}ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
    %p ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®è¦‹ãŸç›®ã‚’è©³ç´°ã«è¨­å®šã§ãã¾ã™ã€‚

  = form_with model: @setting, url: admin_theme_customization_path, method: :patch, local: true, html: { class: 'customization-form' } do |form|
    .customization-grid
      .customization-panel
        %h3 
          ğŸ¨
          ã‚«ãƒ©ãƒ¼è¨­å®š
        
        .form-group
          = form.label :primary_color, 'ãƒ—ãƒ©ã‚¤ãƒãƒªã‚«ãƒ©ãƒ¼'
          .color-input-group
            = form.color_field :primary_color, value: (@setting.primary_color.presence || '#007bff'), class: 'color-input'
            = form.text_field :primary_color, value: (@setting.primary_color.presence || '#007bff'), class: 'color-text', placeholder: '#007bff'
          %small.form-text ãƒ¡ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã‚„ãƒªãƒ³ã‚¯ã®è‰²
        
        .form-group
          = form.label :secondary_color, 'ã‚»ã‚«ãƒ³ãƒ€ãƒªã‚«ãƒ©ãƒ¼'
          .color-input-group
            = form.color_field :secondary_color, value: (@setting.secondary_color.presence || '#6c757d'), class: 'color-input'
            = form.text_field :secondary_color, value: (@setting.secondary_color.presence || '#6c757d'), class: 'color-text', placeholder: '#6c757d'
          %small.form-text ã‚µãƒ–ãƒœã‚¿ãƒ³ã‚„ã‚°ãƒ¬ãƒ¼ã‚¨ãƒªã‚¢ã®è‰²
        
        .form-group
          = form.label :accent_color, 'ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼'
          .color-input-group
            = form.color_field :accent_color, value: (@setting.accent_color.presence || '#ffc107'), class: 'color-input'
            = form.text_field :accent_color, value: (@setting.accent_color.presence || '#ffc107'), class: 'color-text', placeholder: '#ffc107'
          %small.form-text å¼·èª¿è¡¨ç¤ºã‚„ãƒã‚¤ãƒ©ã‚¤ãƒˆã®è‰²

      .customization-panel
        %h3
          ğŸ“
          ãƒ•ã‚©ãƒ³ãƒˆè¨­å®š
        
        .form-group
          = form.label :font_family, 'ãƒ¡ã‚¤ãƒ³ãƒ•ã‚©ãƒ³ãƒˆ'
          = form.select :font_family, 
            options_for_select([
              ['ã‚·ã‚¹ãƒ†ãƒ ãƒ•ã‚©ãƒ³ãƒˆ', 'system-ui, sans-serif'],
              ['Noto Sans JP', '"Noto Sans JP", sans-serif'],
              ['Hiragino Sans', '"Hiragino Kaku Gothic ProN", sans-serif'],
              ['Yu Gothic', '"Yu Gothic Medium", "æ¸¸ã‚´ã‚·ãƒƒã‚¯ Medium", sans-serif'],
              ['Roboto', '"Roboto", sans-serif'],
              ['Open Sans', '"Open Sans", sans-serif']
            ], @setting.font_family.presence || 'system-ui, sans-serif'),
            {}, { class: 'form-control' }
        
        .form-group
          = form.label :header_font, 'ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ•ã‚©ãƒ³ãƒˆ'
          = form.select :header_font,
            options_for_select([
              ['ãƒ¡ã‚¤ãƒ³ãƒ•ã‚©ãƒ³ãƒˆã¨åŒã˜', 'inherit'],
              ['å¤ªå­—', 'bold'],
              ['Noto Serif JP', '"Noto Serif JP", serif'],
              ['Times New Roman', '"Times New Roman", serif'],
              ['Georgia', '"Georgia", serif']
            ], @setting.header_font.presence || 'bold'),
            {}, { class: 'form-control' }

      .customization-panel
        %h3
          ğŸ“
          ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨­å®š
        
        .form-group
          = form.label :header_height, 'ãƒ˜ãƒƒãƒ€ãƒ¼é«˜ã•'
          .input-with-unit
            = form.number_field :header_height, value: (@setting.header_height.presence || 60), class: 'form-control', min: 40, max: 120
            %span.unit px
        
        .form-group
          = form.label :container_width, 'ã‚³ãƒ³ãƒ†ãƒŠå¹…'
          .input-with-unit
            = form.number_field :container_width, value: (@setting.container_width.presence || 1200), class: 'form-control', min: 800, max: 1600
            %span.unit px
        
        .form-group
          = form.label :sidebar_width, 'ã‚µã‚¤ãƒ‰ãƒãƒ¼å¹…'
          .input-with-unit
            = form.number_field :sidebar_width, value: (@setting.sidebar_width.presence || 300), class: 'form-control', min: 200, max: 400
            %span.unit px

      .customization-panel
        %h3
          âœ¨
          ãƒ‡ã‚¶ã‚¤ãƒ³è¨­å®š
        
        .form-group
          = form.label :border_radius, 'è§’ã®ä¸¸ã¿'
          .input-with-unit
            = form.number_field :border_radius, value: (@setting.border_radius.presence || 4), class: 'form-control', min: 0, max: 20
            %span.unit px
        
        .form-group
          = form.label :box_shadow, 'ã‚·ãƒ£ãƒ‰ã‚¦ã®å¼·ã•'
          = form.select :box_shadow,
            options_for_select([
              ['ãªã—', 'none'],
              ['è»½ã„', '0 1px 3px rgba(0,0,0,0.1)'],
              ['æ¨™æº–', '0 2px 4px rgba(0,0,0,0.1)'],
              ['å¼·ã„', '0 4px 8px rgba(0,0,0,0.15)'],
              ['ã¨ã¦ã‚‚å¼·ã„', '0 8px 16px rgba(0,0,0,0.2)']
            ], @setting.box_shadow.presence || '0 2px 4px rgba(0,0,0,0.1)'),
            {}, { class: 'form-control' }
        
        .form-group
          = form.label :animation_speed, 'ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é€Ÿåº¦'
          = form.select :animation_speed,
            options_for_select([
              ['ãªã—', '0s'],
              ['é«˜é€Ÿ', '0.1s'],
              ['æ¨™æº–', '0.2s'],
              ['ã‚†ã£ãã‚Š', '0.3s'],
              ['ã¨ã¦ã‚‚ã‚†ã£ãã‚Š', '0.5s']
            ], @setting.animation_speed.presence || '0.2s'),
            {}, { class: 'form-control' }

    .preview-section
      %h3 ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
      .preview-container
        .preview-frame
          .preview-header{style: "height: #{@setting.header_height.presence || 60}px; background: #{@setting.primary_color.presence || '#007bff'}"}
            %span.preview-logo ã‚µã‚¤ãƒˆãƒ­ã‚´
          .preview-content
            .preview-card{style: "border-radius: #{@setting.border_radius.presence || 4}px; box-shadow: #{@setting.box_shadow.presence || '0 2px 4px rgba(0,0,0,0.1)'}"}
              %h4{style: "color: #{@setting.primary_color.presence || '#007bff'}; font-family: #{@setting.font_family.presence || 'system-ui, sans-serif'}"}
                ã‚µãƒ³ãƒ—ãƒ«è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«
              %p{style: "font-family: #{@setting.font_family.presence || 'system-ui, sans-serif'}"}
                ã“ã¡ã‚‰ã¯è¨˜äº‹ã®æœ¬æ–‡ã‚µãƒ³ãƒ—ãƒ«ã§ã™ã€‚è¨­å®šã—ãŸãƒ•ã‚©ãƒ³ãƒˆã¨ã‚«ãƒ©ãƒ¼ãŒé©ç”¨ã•ã‚Œã¾ã™ã€‚
              %button.preview-button{style: "background: #{@setting.primary_color.presence || '#007bff'}; border-radius: #{@setting.border_radius.presence || 4}px"}
                ç¶šãã‚’èª­ã‚€

    .customization-actions
      = form.submit 'è¨­å®šã‚’ä¿å­˜', class: 'btn btn-primary btn-lg'
      = link_to 'ãƒªã‚»ãƒƒãƒˆ', admin_theme_customization_path, class: 'btn btn-outline-danger'
      = link_to 'æˆ»ã‚‹', edit_admin_settings_path, class: 'btn btn-secondary'