- content_for :page_title, 'サイト設定'

= form_with model: @setting, url: admin_settings_path, method: :patch, local: true, html: { class: 'settings-form' } do |form|
  .settings-container
    .settings-nav
      %ul.settings-tabs
        %li.tab-item.active{data: {tab: 'general'}}
          %a.tab-link 基本設定
        %li.tab-item{data: {tab: 'theme'}}
          %a.tab-link テーマ設定
        %li.tab-item{data: {tab: 'seo'}}
          %a.tab-link SEO設定
        %li.tab-item{data: {tab: 'social'}}
          %a.tab-link ソーシャル設定

    .settings-content
      .tab-content.active{data: {content: 'general'}}
        %h3 基本設定
        .form-group
          = form.label :site_name, 'サイト名　（検索時のタイトル）'
          = form.text_field :site_name, class: 'form-control'
          %small.form-text ヘッダーやタイトルタグに表示されます
        
        .form-group
          = form.label :site_description, 'サイト説明　(検索時のディスクリプション)'
          = form.text_area :site_description, rows: 3, class: 'form-control'
          %small.form-text サイトの簡潔な説明文

        .form-group
          = form.label :contact_email, '連絡先メールアドレス'
          = form.email_field :contact_email, class: 'form-control'

        .form-group
          = form.label :maintenance_mode, 'メンテナンスモード'
          .checkbox-wrapper
            = form.check_box :maintenance_mode, class: 'form-checkbox'
            = form.label :maintenance_mode, 'メンテナンスモードを有効にする'
          %small.form-text 有効にするとサイトがメンテナンス表示になります

        .settings-actions-general
          = form.submit '設定を保存', class: 'btn btn-primary btn-lg'
          = link_to 'キャンセル', admin_root_path, class: 'btn btn-secondary'

      .tab-content{data: {content: 'theme'}}
        %h3 テーマ設定
        %p.theme-description サイトの外観を3つのパターンから選択できます。
        
        .theme-options
          .theme-option
            = form.radio_button :theme, 'modern', class: 'theme-radio', id: 'theme_modern'
            = form.label :theme_modern, class: 'theme-label' do
              .theme-preview.theme-modern
                .preview-header
                .preview-content
                  .preview-line.long
                  .preview-line.medium
                  .preview-line.short
              .theme-info
                %h4 モダンテーマ
                %p 洗練されたモダンなデザイン。グラデーションとシャドウを活用した現代的な外観です。
          
          .theme-option
            = form.radio_button :theme, 'classic', class: 'theme-radio', id: 'theme_classic'
            = form.label :theme_classic, class: 'theme-label' do
              .theme-preview.theme-classic
                .preview-header
                .preview-content
                  .preview-line.long
                  .preview-line.medium
                  .preview-line.short
              .theme-info
                %h4 クラシックテーマ
                %p 伝統的で読みやすいデザイン。セリフフォントとクラシックなレイアウトを採用。

          .theme-option
            = form.radio_button :theme, 'minimal', class: 'theme-radio', id: 'theme_minimal'
            = form.label :theme_minimal, class: 'theme-label' do
              .theme-preview.theme-minimal
                .preview-header
                .preview-content
                  .preview-line.long
                  .preview-line.medium
                  .preview-line.short
              .theme-info
                %h4 ミニマルテーマ
                %p シンプルで無駄のないデザイン。コンテンツに集中できるミニマルな外観です。

        .theme-customization
          %h4 テーマカスタマイズ
          %p 選択したテーマをさらに詳細にカスタマイズできます。
          .customization-actions
            = link_to 'テーマをカスタマイズ', admin_theme_customization_path, class: 'btn btn-outline-primary'
            %small.form-text カラー、フォント、レイアウトなどを詳細に設定できます

      .tab-content{data: {content: 'seo'}}
        %h3 SEO設定
        .form-group
          = form.label :meta_title, 'デフォルトページタイトル'
          = form.text_field :meta_title, class: 'form-control'
          %small.form-text 検索結果に表示されるタイトル

        .form-group
          = form.label :meta_description, 'デフォルトページ説明'
          = form.text_area :meta_description, rows: 3, class: 'form-control'
          %small.form-text 検索結果に表示される説明文（160文字以内推奨）

        .form-group
          = form.label :meta_keywords, 'キーワード'
          = form.text_field :meta_keywords, class: 'form-control'
          %small.form-text カンマ区切りで入力してください

        .form-group
          = form.label :google_analytics_id, 'Google Analytics ID'
          = form.text_field :google_analytics_id, class: 'form-control', placeholder: 'GA-XXXXXXXXX-X'

      .tab-content{data: {content: 'social'}}
        %h3 ソーシャル設定
        .form-group
          = form.label :twitter_url, 'Twitter URL'
          = form.url_field :twitter_url, class: 'form-control', placeholder: 'https://twitter.com/username'

        .form-group
          = form.label :facebook_url, 'Facebook URL'
          = form.url_field :facebook_url, class: 'form-control', placeholder: 'https://facebook.com/page'

        .form-group
          = form.label :instagram_url, 'Instagram URL'
          = form.url_field :instagram_url, class: 'form-control', placeholder: 'https://instagram.com/username'

        .form-group
          = form.label :youtube_url, 'YouTube URL'
          = form.url_field :youtube_url, class: 'form-control', placeholder: 'https://youtube.com/channel'



.settings-styles
  :css
    .settings-container {
      display: flex;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      overflow: hidden;
      min-height: 600px;
    }

    .settings-nav {
      width: 200px;
      background: #f8f9fa;
      border-right: 1px solid #dee2e6;
    }

    .settings-tabs {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    .tab-item {
      border-bottom: 1px solid #dee2e6;
    }

    .tab-link {
      display: block;
      padding: 16px 20px;
      color: #495057;
      text-decoration: none;
      cursor: pointer;
    }

    .tab-item.active .tab-link {
      background: white;
      color: #007bff;
      font-weight: 600;
      border-right: 3px solid #007bff;
    }

    .tab-link:hover {
      background: #e9ecef;
    }

    .settings-content {
      flex: 1;
      padding: 30px;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    .form-group {
      margin-bottom: 24px;
    }

    .form-group label {
      display: block;
      margin-bottom: 6px;
      font-weight: 600;
      color: #333;
    }

    .form-control {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #ced4da;
      border-radius: 4px;
      font-size: 16px;
    }

    .form-control:focus {
      border-color: #007bff;
      outline: none;
      box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
    }

    .form-text {
      font-size: 12px;
      color: #6c757d;
      margin-top: 4px;
    }

    .checkbox-wrapper {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .theme-description {
      color: #666;
      margin-bottom: 24px;
    }

    .theme-options {
      display: grid;
      gap: 20px;
    }

    .theme-option {
      border: 2px solid #dee2e6;
      border-radius: 8px;
      overflow: hidden;
      transition: all 0.2s;
    }

    .theme-option:hover {
      border-color: #007bff;
    }

    .theme-radio {
      display: none;
    }

    .theme-radio:checked + .theme-label {
      border-color: #007bff;
      background: #f8f9ff;
    }

    .theme-label {
      display: block;
      padding: 0;
      margin: 0;
      cursor: pointer;
      border: 2px solid transparent;
      border-radius: 6px;
    }

    .theme-preview {
      height: 120px;
      position: relative;
      padding: 16px;
    }

    .theme-modern {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .theme-classic {
      background: #8b4513;
    }

    .theme-minimal {
      background: #f8f9fa;
      border-bottom: 1px solid #dee2e6;
    }

    .preview-header {
      height: 20px;
      background: rgba(255,255,255,0.3);
      border-radius: 4px;
      margin-bottom: 12px;
    }

    .theme-minimal .preview-header {
      background: #333;
    }

    .preview-line {
      height: 8px;
      background: rgba(255,255,255,0.4);
      border-radius: 2px;
      margin-bottom: 6px;
    }

    .theme-minimal .preview-line {
      background: #999;
    }

    .preview-line.long { width: 80%; }
    .preview-line.medium { width: 60%; }
    .preview-line.short { width: 40%; }

    .theme-info {
      padding: 16px;
      background: white;
    }

    .theme-info h4 {
      margin: 0 0 8px 0;
      color: #333;
      font-size: 16px;
    }

    .theme-info p {
      margin: 0;
      color: #666;
      font-size: 14px;
      line-height: 1.4;
    }

    .settings-actions {
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid #dee2e6;
      text-align: right;
    }

    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      text-decoration: none;
      display: inline-block;
      margin-left: 10px;
    }

    .btn-primary {
      background: #007bff;
      color: white;
    }

    .btn-secondary {
      background: #6c757d;
      color: white;
    }

    .btn-lg {
      padding: 12px 24px;
      font-size: 18px;
    }