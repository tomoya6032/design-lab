- content_for :page_title, 'サイト設定'

= form_with model: @setting, url: admin_settings_path, method: :patch, local: true, html: { class: 'settings-form' } do |form|
  .settings-container
    .settings-nav
      %ul.settings-tabs
        %li.tab-item.active{data: {tab: 'general'}}
          %a.tab-link 基本設定
        %li.tab-item{data: {tab: 'theme'}}
          %a.tab-link テーマ設定
        %li.tab-item{data: {tab: 'seo'}}
          %a.tab-link SEO設定
        %li.tab-item{data: {tab: 'social'}}
          %a.tab-link ソーシャル設定

    .settings-content
      .tab-content.active{data: {content: 'general'}}
        %h3 基本設定
        .form-group
          = form.label :site_name, 'サイト名　（検索時のタイトル）'
          = form.text_field :site_name, class: 'form-control'
          %small.form-text ヘッダーやタイトルタグに表示されます
        
        .form-group
          = form.label :site_description, 'サイト説明　(検索時のディスクリプション)'
          = form.text_area :site_description, rows: 3, class: 'form-control'
          %small.form-text サイトの簡潔な説明文

      %h4.section-subtitle フロントページ ヒーローセクション

      .form-group
        = form.label :hero_title, 'ヒーロータイトル（複数行可）'
        = form.text_area :hero_title, rows: 2, class: 'form-control', placeholder: "例: CMS搭載の\nホームページ制作なら\nぐんまデザインラボ"
        %small.form-text トップページのメインタイトルです。改行も反映されます。

      .form-group
        = form.label :hero_description, 'ヒーロー説明文（複数行可）'
        = form.text_area :hero_description, rows: 4, class: 'form-control', placeholder: "例: 高速で美しい、\nモダンなウェブサイトを\n簡単に作成・管理できるCMSです"
        %small.form-text トップページのメイン説明文です。改行も反映されます。

        .form-group
          = form.label :contact_email, '連絡先メールアドレス'
          = form.email_field :contact_email, class: 'form-control'

        .form-group
          = form.label :maintenance_mode, 'メンテナンスモード'
          .checkbox-wrapper
            = form.check_box :maintenance_mode, class: 'form-checkbox'
            = form.label :maintenance_mode, 'メンテナンスモードを有効にする'
          %small.form-text 有効にするとサイトがメンテナンス表示になります

        .settings-actions-general
          = form.submit '設定を保存', class: 'btn btn-primary btn-lg'
          = link_to 'キャンセル', admin_root_path, class: 'btn btn-secondary'

      .tab-content{data: {content: 'theme'}}
        %h3 カラーテーマ設定
        %p.theme-description サイトのメインカラーを4つのテーマから選択できます。
        
        .color-theme-options
          .color-theme-option
            = form.radio_button :theme, 'orange', class: 'color-theme-radio', id: 'theme_orange'
            = form.label :theme_orange, class: 'color-theme-label' do
              .color-theme-preview.theme-orange
                .color-swatch.primary-color
                .color-swatch.secondary-color
                .color-swatch.accent-color
              .theme-info
                %h4 オレンジテーマ
                %p 暖かみのあるオレンジ系のカラーパレット。エネルギッシュで親しみやすい印象を与えます。
          
          .color-theme-option
            = form.radio_button :theme, 'red', class: 'color-theme-radio', id: 'theme_red'
            = form.label :theme_red, class: 'color-theme-label' do
              .color-theme-preview.theme-red
                .color-swatch.primary-color
                .color-swatch.secondary-color
                .color-swatch.accent-color
              .theme-info
                %h4 レッドテーマ
                %p 情熱的なレッド系のカラーパレット。力強く印象的な外観を演出します。

          .color-theme-option
            = form.radio_button :theme, 'earth-green', class: 'color-theme-radio', id: 'theme_earth_green'
            = form.label :theme_earth_green, class: 'color-theme-label' do
              .color-theme-preview.theme-earth-green
                .color-swatch.primary-color
                .color-swatch.secondary-color
                .color-swatch.accent-color
              .theme-info
                %h4 アースグリーンテーマ
                %p 自然を感じるグリーン系のカラーパレット。落ち着きと安らぎを与える印象です。

          .color-theme-option
            = form.radio_button :theme, 'pearl-black', class: 'color-theme-radio', id: 'theme_pearl_black'
            = form.label :theme_pearl_black, class: 'color-theme-label' do
              .color-theme-preview.theme-pearl-black
                .color-swatch.primary-color
                .color-swatch.secondary-color
                .color-swatch.accent-color
              .theme-info
                %h4 パールブラックテーマ
                %p 洗練されたブラック系のカラーパレット。高級感とモダンな印象を演出します。

        .hero-background-section
          %h4 ヒーローセクション背景画像
          %p トップページのヒーローセクションに表示する背景画像を設定できます。
          
          .form-group
            = form.label :hero_background_image, '背景画像を選択'
            = form.file_field :hero_background_image, class: 'form-control', accept: 'image/*'
            %small.form-text 推奨サイズ: 1920px × 600px（JPG, PNG形式）
          
          - if @setting.hero_background_image.present?
            .current-background-preview
              %h5 現在の背景画像
              .background-image-preview
                %img{src: url_for(@setting.hero_background_image), alt: '現在の背景画像', style: 'max-width: 300px; height: auto; border-radius: 8px;'}
              .background-actions
                = link_to '背景画像を削除', admin_settings_path, method: :patch, 
                  params: { setting: { remove_hero_background: true } }, 
                  class: 'btn btn-outline-danger btn-sm',
                  confirm: '背景画像を削除してもよろしいですか？'

        .settings-actions-theme
          = form.submit 'テーマ設定を保存', class: 'btn btn-primary btn-lg'
          = link_to 'キャンセル', admin_root_path, class: 'btn btn-secondary'

      .tab-content{data: {content: 'seo'}}
        %h3 SEO設定
        .form-group
          = form.label :meta_title, 'デフォルトページタイトル'
          = form.text_field :meta_title, class: 'form-control'
          %small.form-text 検索結果に表示されるタイトル

        .form-group
          = form.label :meta_description, 'デフォルトページ説明'
          = form.text_area :meta_description, rows: 3, class: 'form-control'
          %small.form-text 検索結果に表示される説明文（160文字以内推奨）

        .form-group
          = form.label :meta_keywords, 'キーワード'
          = form.text_field :meta_keywords, class: 'form-control'
          %small.form-text カンマ区切りで入力してください

        .form-group
          = form.label :google_analytics_id, 'Google Analytics ID'
          = form.text_field :google_analytics_id, class: 'form-control', placeholder: 'GA-XXXXXXXXX-X'

      .tab-content{data: {content: 'social'}}
        %h3 ソーシャル設定
        .form-group
          = form.label :twitter_url, 'Twitter URL'
          = form.url_field :twitter_url, class: 'form-control', placeholder: 'https://twitter.com/username'

        .form-group
          = form.label :facebook_url, 'Facebook URL'
          = form.url_field :facebook_url, class: 'form-control', placeholder: 'https://facebook.com/page'

        .form-group
          = form.label :instagram_url, 'Instagram URL'
          = form.url_field :instagram_url, class: 'form-control', placeholder: 'https://instagram.com/username'

        .form-group
          = form.label :youtube_url, 'YouTube URL'
          = form.url_field :youtube_url, class: 'form-control', placeholder: 'https://youtube.com/channel'



.settings-styles
  :css
    .settings-container {
      display: flex;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      overflow: hidden;
      min-height: 600px;
    }

    .settings-nav {
      width: 200px;
      background: #f8f9fa;
      border-right: 1px solid #dee2e6;
    }

    .settings-tabs {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    .tab-item {
      border-bottom: 1px solid #dee2e6;
    }

    .tab-link {
      display: block;
      padding: 16px 20px;
      color: #495057;
      text-decoration: none;
      cursor: pointer;
    }

    .tab-item.active .tab-link {
      background: white;
      color: #007bff;
      font-weight: 600;
      border-right: 3px solid #007bff;
    }

    .tab-link:hover {
      background: #e9ecef;
    }

    .settings-content {
      flex: 1;
      padding: 30px;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    .form-group {
      margin-bottom: 24px;
    }

    .form-group label {
      display: block;
      margin-bottom: 6px;
      font-weight: 600;
      color: #333;
    }

    .form-control {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #ced4da;
      border-radius: 4px;
      font-size: 16px;
    }

    .form-control:focus {
      border-color: #007bff;
      outline: none;
      box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
    }

    .form-text {
      font-size: 12px;
      color: #6c757d;
      margin-top: 4px;
    }

    .checkbox-wrapper {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .theme-description {
      color: #666;
      margin-bottom: 24px;
    }

    .theme-options {
      display: grid;
      gap: 20px;
    }

    .theme-option {
      border: 2px solid #dee2e6;
      border-radius: 8px;
      overflow: hidden;
      transition: all 0.2s;
    }

    .theme-option:hover {
      border-color: #007bff;
    }

    .theme-radio {
      display: none;
    }

    .theme-radio:checked + .theme-label {
      border-color: #007bff;
      background: #f8f9ff;
    }

    .theme-label {
      display: block;
      padding: 0;
      margin: 0;
      cursor: pointer;
      border: 2px solid transparent;
      border-radius: 6px;
    }

    .theme-preview {
      height: 120px;
      position: relative;
      padding: 16px;
    }

    .theme-modern {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .theme-classic {
      background: #8b4513;
    }

    .theme-minimal {
      background: #f8f9fa;
      border-bottom: 1px solid #dee2e6;
    }

    .preview-header {
      height: 20px;
      background: rgba(255,255,255,0.3);
      border-radius: 4px;
      margin-bottom: 12px;
    }

    .theme-minimal .preview-header {
      background: #333;
    }

    .preview-line {
      height: 8px;
      background: rgba(255,255,255,0.4);
      border-radius: 2px;
      margin-bottom: 6px;
    }

    .theme-minimal .preview-line {
      background: #999;
    }

    .preview-line.long { width: 80%; }
    .preview-line.medium { width: 60%; }
    .preview-line.short { width: 40%; }

    .theme-info {
      padding: 16px;
      background: white;
    }

    .theme-info h4 {
      margin: 0 0 8px 0;
      color: #333;
      font-size: 16px;
    }

    .theme-info p {
      margin: 0;
      color: #666;
      font-size: 14px;
      line-height: 1.4;
    }

    .settings-actions {
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid #dee2e6;
      text-align: right;
    }

    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      text-decoration: none;
      display: inline-block;
      margin-left: 10px;
    }

    .btn-primary {
      background: #007bff;
      color: white;
    }

    .btn-secondary {
      background: #6c757d;
      color: white;
    }

    .btn-lg {
      padding: 12px 24px;
      font-size: 18px;
    }

    .section-subtitle {
      color: #495057;
      font-size: 16px;
      font-weight: 600;
      margin: 20px 0 15px 0;
      padding-bottom: 8px;
      border-bottom: 2px solid #e9ecef;
    }