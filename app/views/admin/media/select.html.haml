.media-selector-modal
  .media-selector-header
    %h3 ãƒ¡ãƒ‡ã‚£ã‚¢ã‚’é¸æŠž
    %button.close-modal{type: 'button', onclick: 'closeMediaSelector()'} Ã—
  
  .media-selector-filters
    .filter-buttons
      %button.filter-btn.active{data: {type: 'all'}} ã™ã¹ã¦
      %button.filter-btn{data: {type: 'image'}} ç”»åƒ
      %button.filter-btn{data: {type: 'video'}} å‹•ç”»
      %button.filter-btn{data: {type: 'document'}} ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
    
    .search-box
      %input.media-search{type: 'text', placeholder: 'æ¤œç´¢...'}
  
  .media-selector-grid
    - @media.each do |medium|
      .media-selector-item{data: {id: medium.id, type: medium.file_type, title: medium.title}}
        .media-thumbnail-wrapper{onclick: "selectMedia(#{medium.id}, '#{medium.title}', '#{medium.file_url}')"}
          - if medium.image?
            %img.media-thumbnail{src: medium.thumbnail_url, alt: medium.alt_text}
          - elsif medium.video?
            .media-video-thumb
              ðŸŽ¬
              %span Video
          - elsif medium.document?
            .media-document-thumb
              ðŸ“„
              %span Document
          - else
            .media-file-thumb
              ðŸ“Ž
              %span File
        
        .media-info
          .media-title= medium.title
          .media-meta
            %span.file-type= medium.file_type
            %span.file-size= number_to_human_size(medium.file_size || 0)
            - if medium.used?
              %span.usage-indicator.used ä½¿ç”¨ä¸­
            - else
              %span.usage-indicator.unused æœªä½¿ç”¨
  
  - if @media.empty?
    .empty-state
      %p ãƒ¡ãƒ‡ã‚£ã‚¢ãŒã‚ã‚Šã¾ã›ã‚“
      = link_to 'æ–°ã—ã„ãƒ¡ãƒ‡ã‚£ã‚¢ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰', new_admin_medium_path, class: 'btn btn-primary'

:javascript
  function selectMedia(id, title, url) {
    // å‘¼ã³å‡ºã—å…ƒã®ãƒ•ã‚©ãƒ¼ãƒ ã«å€¤ã‚’è¨­å®š
    if (window.mediaSelectCallback) {
      window.mediaSelectCallback(id, title, url);
    }
    closeMediaSelector();
  }
  
  function closeMediaSelector() {
    document.getElementById('media-selector-overlay').remove();
  }
  
  // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½
  document.querySelectorAll('.filter-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
      this.classList.add('active');
      
      const filterType = this.dataset.type;
      filterMedia(filterType);
    });
  });
  
  function filterMedia(type) {
    const items = document.querySelectorAll('.media-selector-item');
    items.forEach(item => {
      if (type === 'all') {
        item.style.display = 'block';
      } else {
        const itemType = item.dataset.type;
        if (itemType.startsWith(type)) {
          item.style.display = 'block';
        } else {
          item.style.display = 'none';
        }
      }
    });
  }
  
  // æ¤œç´¢æ©Ÿèƒ½
  document.querySelector('.media-search').addEventListener('input', function() {
    const searchTerm = this.value.toLowerCase();
    const items = document.querySelectorAll('.media-selector-item');
    
    items.forEach(item => {
      const title = item.dataset.title.toLowerCase();
      if (title.includes(searchTerm)) {
        item.style.display = 'block';
      } else {
        item.style.display = 'none';
      }
    });
  });