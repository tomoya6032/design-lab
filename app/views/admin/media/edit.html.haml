- content_for :page_title, "#{@medium.title} ã®ç·¨é›†"

- content_for :head do
  = javascript_include_tag 'admin/media_edit', 'data-turbo-track': 'reload'

.media-edit-container
  .media-edit-header
    .breadcrumb
      = link_to 'ãƒ¡ãƒ‡ã‚£ã‚¢ç®¡ç†', admin_media_path, class: 'breadcrumb-link'
      %span.breadcrumb-separator /
      = link_to @medium.title.presence || 'ç„¡é¡Œ', admin_medium_path(@medium), class: 'breadcrumb-link'
      %span.breadcrumb-separator /
      %span.current ç·¨é›†

  .media-edit-content
    .edit-left-panel
      .current-image-section
        %h3 ç¾åœ¨ã®ç”»åƒ
        .current-image-preview
          - if @medium.image?
            %img#current-image{src: @medium.file_url, alt: @medium.alt_text || @medium.title}
          - else
            .no-image-placeholder
              ğŸ“„
              %p ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã¯ç·¨é›†ã§ãã¾ã›ã‚“

      - if @medium.image?
        .image-tools-section
          %h3 ç”»åƒç·¨é›†ãƒ„ãƒ¼ãƒ«
          .tool-buttons
            .tool-group
              %h4 ãƒªã‚µã‚¤ã‚º
              .resize-buttons
                %button.tool-btn{onclick: 'resizeImage(0.5)'} 50%ã«ç¸®å°
                %button.tool-btn{onclick: 'resizeImage(0.75)'} 75%ã«ç¸®å°
                %button.tool-btn{onclick: 'resizeImage(1.25)'} 125%ã«æ‹¡å¤§
                %button.tool-btn{onclick: 'resizeImage(1.5)'} 150%ã«æ‹¡å¤§
            
            .tool-group
              %h4 å½¢çŠ¶å¤‰æ›´
              .shape-buttons
                %button.tool-btn{onclick: 'enableManualCrop()'} æ‰‹å‹•ãƒˆãƒªãƒŸãƒ³ã‚°
                %button.tool-btn{onclick: 'cropToSquare()'} æ­£æ–¹å½¢ã«ã‚¯ãƒ­ãƒƒãƒ—
                %button.tool-btn{onclick: 'cropToCircle()'} å††å½¢ã«ã‚¯ãƒ­ãƒƒãƒ—
            
            .tool-group
              %h4 å“è³ªèª¿æ•´
              .quality-buttons
                %button.tool-btn{onclick: 'compressImage(0.7)'} é«˜å“è³ªåœ§ç¸®
                %button.tool-btn{onclick: 'compressImage(0.5)'} æ¨™æº–åœ§ç¸®
                %button.tool-btn{onclick: 'compressImage(0.3)'} é«˜åœ§ç¸®ï¼ˆè»½é‡ï¼‰

        .preview-section
          %h3 ç·¨é›†ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
          .edit-preview
            %canvas#edit-canvas{style: 'display: none;'}
            %img#preview-image{style: 'max-width: 100%; display: none;'}
            .crop-container#crop-container{style: 'display: none;'}
              %img#crop-image
          
          .crop-actions#crop-actions{style: 'display: none;'}
            %button.btn.btn-success{onclick: 'applyCrop()'} ãƒˆãƒªãƒŸãƒ³ã‚°å®Ÿè¡Œ
            %button.btn.btn-secondary{onclick: 'cancelCrop()'} ã‚­ãƒ£ãƒ³ã‚»ãƒ«
          
          .preview-actions
            %button.btn.btn-primary{id: 'apply-btn', onclick: 'applyChanges()', disabled: true} å¤‰æ›´ã‚’é©ç”¨
            %button.btn.btn-secondary{onclick: 'resetChanges()'} ãƒªã‚»ãƒƒãƒˆ

    .edit-right-panel
      .metadata-form-section
        .section-header
          %h3
            ğŸ“ ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç·¨é›†
          %p.section-description ãƒ•ã‚¡ã‚¤ãƒ«ã®æƒ…å ±ã‚’ç·¨é›†ã§ãã¾ã™ã€‚SEOã«ã‚‚é‡è¦ãªé …ç›®ã§ã™ã€‚
        
        = form_with model: [:admin, @medium], local: true, html: { class: 'metadata-form' } do |form|
          .form-group
            .form-label-wrapper
              = form.label :title, class: 'form-label' do
                ğŸ·ï¸ ã‚¿ã‚¤ãƒˆãƒ«
                %span.required *
            = form.text_field :title, class: 'form-control', placeholder: 'ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'
            .form-help
              ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è­˜åˆ¥ã™ã‚‹ãŸã‚ã®åå‰ã§ã™ã€‚æ¤œç´¢æ™‚ã«ã‚‚ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
          
          .form-group
            .form-label-wrapper
              = form.label :description, class: 'form-label' do
                ğŸ“„ èª¬æ˜
            = form.text_area :description, class: 'form-control', rows: 4, placeholder: 'ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¤ã„ã¦è©³ã—ãèª¬æ˜ã—ã¦ãã ã•ã„...'
            .form-help
              ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚„ç”¨é€”ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚è©³ç´°ãªæƒ…å ±ãŒã‚ã‚‹ã¨ç®¡ç†ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚
          
          .form-group
            .form-label-wrapper
              = form.label :alt_text, class: 'form-label' do
                ğŸ–¼ï¸ Altå±æ€§
                - if @medium.image?
                  %span.recommended (æ¨å¥¨)
            = form.text_field :alt_text, class: 'form-control', placeholder: 'ç”»åƒã®å†…å®¹ã‚’ç°¡æ½”ã«èª¬æ˜ã—ã¦ãã ã•ã„'
            .form-help
              ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼ã‚„ç”»åƒãŒè¡¨ç¤ºã•ã‚Œãªã„å ´åˆã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã®å‘ä¸Šã«ã¤ãªãŒã‚Šã¾ã™ã€‚
          
          .form-actions
            = form.submit 'ğŸ’¾ å¤‰æ›´ã‚’ä¿å­˜', class: 'btn btn-primary btn-save'
            = link_to 'âŒ ã‚­ãƒ£ãƒ³ã‚»ãƒ«', admin_medium_path(@medium), class: 'btn btn-secondary'

      .file-info-section
        .section-header
          %h3
            ğŸ“Š ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±
          %p.section-description ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®è©³ç´°æƒ…å ±ã§ã™ã€‚
        
        .info-cards
          .info-card-item
            .info-icon ğŸ“
            .info-content
              %label ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—
              %span.info-value= @medium.file_type
          
          .info-card-item
            .info-icon ğŸ“
            .info-content
              %label ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º
              %span.info-value= number_to_human_size(@medium.file_size || 0)
          
          .info-card-item
            .info-icon ğŸ“…
            .info-content
              %label ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ—¥
              %span.info-value= @medium.created_at.strftime('%Yå¹´%mæœˆ%dæ—¥')
          
          .info-card-item
            .info-icon ğŸ”„
            .info-content
              %label æœ€çµ‚æ›´æ–°
              %span.info-value= @medium.updated_at.strftime('%Yå¹´%mæœˆ%dæ—¥')