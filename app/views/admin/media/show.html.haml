- content_for :page_title, @medium.title.presence || 'ãƒ¡ãƒ‡ã‚£ã‚¢è©³ç´°'

.media-detail-container
  .media-detail-header
    .breadcrumb
      = link_to 'ãƒ¡ãƒ‡ã‚£ã‚¢ç®¡ç†', admin_media_path, class: 'breadcrumb-link'
      %span.breadcrumb-separator /
      %span.current= @medium.title.presence || 'ç„¡é¡Œ'
    
    .media-actions
      = link_to 'ç·¨é›†', edit_admin_medium_path(@medium), class: 'btn btn-primary'
      = link_to 'å‰Šé™¤', admin_medium_path(@medium), method: :delete, 
                data: { confirm: 'æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ' }, class: 'btn btn-danger'

  .media-detail-content
    .media-preview-section
      .media-preview
        - if @medium.image?
          %img.detail-image{src: @medium.file_url, alt: @medium.alt_text || @medium.title}
        - elsif @medium.video?
          %video.detail-video{controls: true, src: @medium.file_url}
            ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯å‹•ç”»ã®å†ç”Ÿã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚
        - elsif @medium.audio?
          .audio-player
            %audio{controls: true, src: @medium.file_url}
              ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯éŸ³å£°ã®å†ç”Ÿã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚
            .audio-info
              ğŸµ
              %span.audio-label Audio File
        - elsif @medium.document?
          .document-preview
            ğŸ“„
            %span.document-label Document
            .document-actions
              = link_to 'ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰', @medium.file_url, class: 'btn btn-sm btn-secondary', target: '_blank'
        - else
          .file-preview
            ğŸ“
            %span.file-label File
            .file-actions
              = link_to 'ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰', @medium.file_url, class: 'btn btn-sm btn-secondary', target: '_blank'

    .media-info-section
      .info-card
        %h3 ãƒ¡ãƒ‡ã‚£ã‚¢æƒ…å ±
        .info-grid
          .info-item
            %label ãƒ•ã‚¡ã‚¤ãƒ«å
            %span= @medium.title
          
          .info-item
            %label èª¬æ˜
            %span= @medium.description.presence || 'èª¬æ˜ãªã—'
          
          - if @medium.alt_text.present?
            .info-item
              %label Altå±æ€§
              %span= @medium.alt_text
          
          .info-item
            %label ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—
            %span= @medium.file_type
          
          .info-item
            %label ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º
            %span= number_to_human_size(@medium.file_size || 0)
          
          .info-item
            %label ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ—¥æ™‚
            %span= @medium.created_at.strftime('%Yå¹´%mæœˆ%dæ—¥ %H:%M')
          
          .info-item
            %label ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰è€…
            %span= @medium.user.email
          
          .info-item
            %label ä½¿ç”¨çŠ¶æ³
            %span{class: @medium.used? ? 'status-used' : 'status-unused'}
              = @medium.used? ? "ä½¿ç”¨ä¸­(#{@medium.usage_count}ç®‡æ‰€)" : 'æœªä½¿ç”¨'

      - if @medium.used?
        .usage-details-card
          %h3 ä½¿ç”¨ç®‡æ‰€ã®è©³ç´°
          .usage-list
            - @medium.media_usages.includes(:mediable).each do |usage|
              .usage-detail-item
                .usage-type
                  %span.usage-type-badge{class: "usage-#{usage.usage_type}"}
                    = usage.usage_type_name
                .usage-content
                  %strong= usage.mediable_type
                  - if usage.mediable.respond_to?(:title)
                    %span.usage-title= usage.mediable.title
                  - if usage.context.present?
                    %span.usage-context= "(#{usage.context})"
                  - if defined?(admin_path_for)
                    = link_to 'ç·¨é›†', admin_path_for(usage.mediable), class: 'usage-edit-link'

      - if @medium.image?
        .usage-card
          %h3 ä½¿ç”¨æ–¹æ³•
          .usage-examples
            .usage-item
              %label URL
              .url-field
                %input.copy-input{type: 'text', value: @medium.file_url, readonly: true}
                %button.copy-btn{type: 'button', onclick: 'copyToClipboard(this)'} ã‚³ãƒ”ãƒ¼
            
            .usage-item
              %label HTMLã‚¿ã‚°
              .url-field
                %input.copy-input{type: 'text', value: "<img src=\"#{@medium.file_url}\" alt=\"#{@medium.alt_text || @medium.title}\" />", readonly: true}
                %button.copy-btn{type: 'button', onclick: 'copyToClipboard(this)'} ã‚³ãƒ”ãƒ¼

:javascript
  function copyToClipboard(button) {
    const input = button.previousElementSibling;
    input.select();
    document.execCommand('copy');
    
    const originalText = button.textContent;
    button.textContent = 'ã‚³ãƒ”ãƒ¼æ¸ˆã¿ï¼';
    button.style.backgroundColor = '#28a745';
    
    setTimeout(() => {
      button.textContent = originalText;
      button.style.backgroundColor = '';
    }, 2000);
  }

    .preview-video {
      max-width: 100%;
      max-height: 100%;
      border-radius: 4px;
    }

    .preview-placeholder {
      text-align: center;
      color: #666;
    }

    .preview-placeholder i {
      font-size: 64px;
      color: #ccc;
      margin-bottom: 20px;
    }

    .preview-placeholder h4 {
      margin: 0 0 15px 0;
      color: #333;
    }

    .media-info-panel {
      padding: 30px;
    }

    .media-info-panel h3 {
      margin: 0 0 25px 0;
      color: #333;
      border-bottom: 2px solid #f8f9fa;
      padding-bottom: 10px;
    }

    .info-group {
      margin-bottom: 20px;
    }

    .info-group label {
      display: block;
      font-weight: 600;
      color: #666;
      font-size: 12px;
      text-transform: uppercase;
      margin-bottom: 5px;
    }

    .info-group p {
      margin: 0;
      color: #333;
      word-break: break-all;
    }

    .file-url-link {
      color: #007bff;
      text-decoration: none;
    }

    .file-url-link:hover {
      text-decoration: underline;
    }

    .file-type-badge {
      background: #e9ecef;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      text-transform: uppercase;
      font-weight: 500;
    }

    .btn {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      text-decoration: none;
      display: inline-block;
      font-size: 14px;
      font-weight: 500;
    }

    .btn-primary {
      background: #007bff;
      color: white;
    }

    .btn-secondary {
      background: #6c757d;
      color: white;
    }

    .btn-danger {
      background: #dc3545;
      color: white;
    }

    .btn-outline-secondary {
      background: transparent;
      color: #6c757d;
      border: 1px solid #6c757d;
    }

    .btn:hover {
      opacity: 0.9;
    }

    @media (max-width: 768px) {
      .media-detail-content {
        grid-template-columns: 1fr;
      }
    }