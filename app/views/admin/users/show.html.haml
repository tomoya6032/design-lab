- content_for :page_title, @user.full_name

.user-detail-container
  .user-detail-header
    .user-actions
      = link_to '編集', edit_admin_user_path(@user), class: 'btn btn-secondary'
      - unless @user == current_user
        = link_to '削除', admin_user_path(@user), method: :delete, 
                  data: { confirm: '本当に削除しますか？' }, class: 'btn btn-danger'
      = link_to '一覧に戻る', admin_users_path, class: 'btn btn-outline-secondary'

  .user-detail-content
    .user-avatar
      .avatar-placeholder
        %i.icon.icon-user
        %span.avatar-initial= @user.email.first.upcase

    .user-info-panel
      %h3 ユーザー情報
      
      .info-group
        %label 名前
        %p= @user.full_name
      
      .info-group
        %label メールアドレス
        %p= @user.email
      
      .info-group
        %label 権限
        %p
          %span.role-badge{class: "role-#{@user.role}"}= @user.role_display_name
      
      .info-group
        %label 登録日
        %p= @user.created_at.strftime('%Y年%m月%d日 %H:%M')
      
      .info-group
        %label 最終更新
        %p= @user.updated_at.strftime('%Y年%m月%d日 %H:%M')
      
      - if @user.trackable_enabled? && @user.last_sign_in_at
        .info-group
          %label 最終ログイン
          %p= @user.last_login_display
      
      - if @user.trackable_enabled?
        .info-group
          %label ログイン回数
          %p= @user.login_count_display

.user-activity-section
  %h3 アクティビティ
  
  .activity-stats
    .stat-card
      .stat-number= @user.articles.count
      .stat-label 作成した記事
    
    .stat-card
      .stat-number= @user.pages.count
      .stat-label 作成したページ
    
    .stat-card
      .stat-number= @user.media.count
      .stat-label アップロードしたメディア

  - if @user.articles.any?
    .recent-content
      %h4 最近の記事
      .content-list
        - @user.articles.limit(5).order(created_at: :desc).each do |article|
          .content-item
            = link_to article.title, admin_article_path(article), class: 'content-title'
            %span.content-date= article.created_at.strftime('%Y/%m/%d')

.user-detail-styles
  :css
    .user-detail-container {
      max-width: 800px;
      margin: 0 auto;
    }

    .user-detail-header {
      margin-bottom: 30px;
      text-align: right;
    }

    .user-actions {
      display: flex;
      gap: 10px;
      justify-content: flex-end;
    }

    .user-detail-content {
      display: grid;
      grid-template-columns: 200px 1fr;
      gap: 30px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      padding: 30px;
      margin-bottom: 30px;
    }

    .user-avatar {
      text-align: center;
    }

    .avatar-placeholder {
      width: 120px;
      height: 120px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 50%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin: 0 auto;
      color: white;
    }

    .avatar-placeholder i {
      font-size: 48px;
      margin-bottom: 5px;
    }

    .avatar-initial {
      font-size: 24px;
      font-weight: bold;
    }

    .user-info-panel h3 {
      margin: 0 0 25px 0;
      color: #333;
      border-bottom: 2px solid #f8f9fa;
      padding-bottom: 10px;
    }

    .info-group {
      margin-bottom: 20px;
    }

    .info-group label {
      display: block;
      font-weight: 600;
      color: #666;
      font-size: 12px;
      text-transform: uppercase;
      margin-bottom: 5px;
    }

    .info-group p {
      margin: 0;
      color: #333;
    }

    .role-badge {
      padding: 4px 12px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 500;
      text-transform: uppercase;
    }

    .role-admin {
      background: #dc3545;
      color: white;
    }

    .role-editor {
      background: #ffc107;
      color: #212529;
    }

    .role-user {
      background: #e9ecef;
      color: #495057;
    }

    .user-activity-section {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      padding: 30px;
    }

    .user-activity-section h3 {
      margin: 0 0 25px 0;
      color: #333;
      border-bottom: 2px solid #f8f9fa;
      padding-bottom: 10px;
    }

    .activity-stats {
      display: flex;
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      flex: 1;
      text-align: center;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
    }

    .stat-number {
      font-size: 24px;
      font-weight: bold;
      color: #007bff;
      display: block;
    }

    .stat-label {
      font-size: 12px;
      color: #666;
      margin-top: 5px;
    }

    .recent-content h4 {
      margin: 0 0 15px 0;
      color: #333;
    }

    .content-list {
      border: 1px solid #dee2e6;
      border-radius: 4px;
    }

    .content-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 15px;
      border-bottom: 1px solid #dee2e6;
    }

    .content-item:last-child {
      border-bottom: none;
    }

    .content-title {
      color: #007bff;
      text-decoration: none;
      font-weight: 500;
    }

    .content-title:hover {
      text-decoration: underline;
    }

    .content-date {
      font-size: 12px;
      color: #666;
    }

    .btn {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      text-decoration: none;
      display: inline-block;
      font-size: 14px;
      font-weight: 500;
    }

    .btn-secondary {
      background: #6c757d;
      color: white;
    }

    .btn-danger {
      background: #dc3545;
      color: white;
    }

    .btn-outline-secondary {
      background: transparent;
      color: #6c757d;
      border: 1px solid #6c757d;
    }

    .btn:hover {
      opacity: 0.9;
    }

    @media (max-width: 768px) {
      .user-detail-content {
        grid-template-columns: 1fr;
        text-align: center;
      }

      .activity-stats {
        flex-direction: column;
      }

      .user-actions {
        justify-content: center;
      }
    }