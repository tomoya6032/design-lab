- content_for :page_title, 'カテゴリ作成'

.admin-header
  .admin-header-content
    %h1.admin-title
      %i.icon-plus
      新しいカテゴリを作成
    %p.admin-subtitle カテゴリを作成して記事を整理しましょう

.admin-content
  = form_with model: [:admin, @category], local: true, class: 'admin-form' do |form|
    - if @category.errors.any?
      .alert.alert-danger
        %h4 入力エラーがあります：
        %ul
          - @category.errors.full_messages.each do |message|
            %li= message

    .form-group
      = form.label :name, 'カテゴリ名'
      = form.text_field :name, class: 'form-control', placeholder: 'カテゴリ名を入力してください'
      %small.form-text カテゴリの表示名です

    .form-group
      = form.label :slug, 'スラッグ'
      = form.text_field :slug, class: 'form-control', placeholder: 'category-slug'
      %small.form-text URL に使用される識別子です（自動生成されます）

    .form-group
      = form.label :description, '説明'
      = form.text_area :description, class: 'form-control', rows: 3, placeholder: 'カテゴリの説明を入力してください（任意）'

    .form-group
      = form.label :parent_id, '親カテゴリ'
      = form.select :parent_id, 
        options_from_collection_for_select(@parent_categories, :id, :name, @category.parent_id),
        { prompt: 'なし（ルートカテゴリ）' },
        { class: 'form-control' }
      %small.form-text 階層化したい場合は親カテゴリを選択してください

    .form-group
      = form.label :position, '表示順序'
      = form.number_field :position, class: 'form-control', value: @category.position || 0
      %small.form-text 数値が小さいほど上に表示されます

    .form-actions
      = form.submit 'カテゴリを作成', class: 'btn btn-primary'
      = link_to 'キャンセル', admin_categories_path, class: 'btn btn-secondary'
